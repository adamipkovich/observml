<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Test Results - ObservML</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Test Results";
        var mkdocs_page_input_path = "test_results.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ObservML
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../localdev/">Local Development</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../serve/">Docker Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../client/">Client Usage and Testing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Components</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../plugin_system/">Plugin System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins/">Plugins</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Framework</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../models/">Models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../experiments/">Experiments</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Test Results</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#fault-isolation">Fault Isolation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#time-series-analysis-multiple-models">Time Series Analysis - Multiple models</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fault-detection-parameterizing-models">Fault Detection - Parameterizing models</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#text-mining">Text Mining</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../roadmap/">Roadmap</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ObservML</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Framework</li>
      <li class="breadcrumb-item active">Test Results</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="results-for-experiments">Results for Experiments</h1>
<p>This section provides the results for specific experiment cases for datasets. 
In the example version of the projects, several templates are provided:</p>
<ol>
<li>Fault isolation on detect_dataset [digital output signal for circuit, with 3 alterante voltages and currents] -- Decision Tree </li>
<li>Fault isolation on hmm data - Hidden Markov Model</li>
<li>Time series analysis on time_series_analysis - LSTM</li>
<li>
<p>Electricity data - Prophet</p>
</li>
<li>
<p>(Multivariate) Fault Detection on Pump data (50 sensors) - PCA</p>
</li>
<li>
<p>Tenesse-Eastman reactor data for fault detection - PCA</p>
</li>
<li>
<p>Process-mining - TopKRules - on operator data of cable head maker machines (specifically machine 27). (cable_head_mach_27)</p>
</li>
<li>
<p>Process-mining - heuristic miner on machine state data (cable head machines) (traces_csoft_oper)</p>
</li>
</ol>
<p>The config.yaml looks the following:</p>
<pre><code>defaults:
  ## Fault isolation test 
  - detect : DecisionTree.yaml
  - hmm : HMM.yaml
  ## Time series test
  #- time_series : LSTM.yaml
  #- electric : Prophet.yaml
  ## Fault detection test
  #- pump : pca.yaml
  #- ten_detect : iforest.yaml
  ## Process mining test
  #- oper : HeuristicsMiner.yaml 
  #- process_mining : TopKRules.yaml
</code></pre>
<p>We encourage you to try them out. Comment in/out any key/values pairs. Please Note that sending requests/data in quick succession may freeze the backend. 
Please note that there is a timer between sending the request in the script, which can be adjust as seen fit.</p>
<h2 id="fault-isolation">Fault Isolation</h2>
<p>Fault isolation experiment is used during the identification of states and specific labels. The most trivial use is to uncover anomalies by providing the "anomaly" label.
In the case study we use the data from an electric circuit, where digital output is labeled as an anomaly if it is high (1). Inputs are alternating voltage and current, which is often problematic with linear models.</p>
<p>Zeroth step is always to ensure that the app is running:</p>
<pre><code>    docker compose up
</code></pre>
<p>For training the model, we define a decision tree model. First step is to modify the project template to include only the "detect" dataset.</p>
<p>config.yaml</p>
<pre><code>    defaults:
        - detect : DecisionTree.yaml
        - hmm : HMM.yaml
</code></pre>
<p>To do a train request:</p>
<pre><code>python train_script_local.py
</code></pre>
<p>The EDA results is the following for the detect dataset:</p>
<p>A set of histograms for the variables:
<img alt="alt text" src="../fault_iso_1.png" /></p>
<p>A correlation heatmap, categorical data provides complications, and therefore is omitted at this stage:
<img alt="alt text" src="../image.png" /></p>
<p>If we switch for hmm dataset, we will see the following for the variables:
<img alt="alt text" src="../hmm_hist.png" /></p>
<p>Feature importance for decision trees:
<img alt="alt text" src="../image-1.png" /></p>
<p>Prediction result:
<img alt="alt text" src="../image-2.png" /></p>
<h2 id="time-series-analysis-multiple-models">Time Series Analysis - Multiple models</h2>
<p>For training the model, we define a LSTM and a prophet model. First step is to modify the project template to include only the "time_series" and "electric" dataset.</p>
<p>config.yaml</p>
<pre><code>    defaults:
        - time_series : LSTM.yaml
        - electric : Prophet.yaml
</code></pre>
<p>Outliers for time series dataset:</p>
<p><img alt="alt text" src="../image-3.png" /></p>
<p>Outliers for electric dataset:
<img alt="alt text" src="../image-4.png" /></p>
<p>Prediction for time series dataset requires the following code:</p>
<pre><code>if __name__ == &quot;__main__&quot;:
    from api_commands import predict
    import pandas as pd

    for i in range(8):
        data = pd.read_excel(f&quot;./data/time_series_test_{i}.xlsx&quot;)
        data.reset_index(inplace=True, drop=True)
        data = data.to_json()
        predict(url=&quot;http://localhost:8010&quot;, model_name = &quot;time_series, data = data, rhost = &quot;localhost&quot;, rport = &quot;5100&quot;)
</code></pre>
<p><img alt="alt text" src="../image-5.png" /></p>
<p>Metrics for predictions:</p>
<p><img alt="alt text" src="../image-6.png" /></p>
<h2 id="fault-detection-parameterizing-models">Fault Detection - Parameterizing models</h2>
<p>config.yaml</p>
<pre><code>defaults:
  - pump : pca.yaml
  - ten_detect : iforest.yaml
</code></pre>
<p>PCA performance on pump data:
<img alt="alt text" src="../image-7.png" /></p>
<p>2PC outlier detection for 50 variables:
<img alt="alt text" src="../image-10.png" /></p>
<p>To use test_script.py with the pump dataset, use the following code:</p>
<pre><code>if __name__ == &quot;__main__&quot;:
    from api_commands import predict
    import pandas as pd

    for i in range(8):
        data = pd.read_excel(f&quot;./data/pump_test_{i}.xlsx&quot;)
        data.reset_index(inplace=True, drop=True)
        data = data.to_json()
        predict(url=&quot;http://localhost:8010&quot;, model_name = &quot;pump&quot;, data = data, rhost = &quot;localhost&quot;, rport = &quot;5100&quot;)
</code></pre>
<p>The outliers figure changes with the addition of new data:
<img alt="alt text" src="../image-11.png" />
This is an exception, each other model will modify the predict figure.</p>
<p>Isolation Forest performance on Tenesse Eastman data:
<img alt="alt text" src="../image-8.png" /></p>
<p>the parameters have been set to:
    params:
      n_estimators : 100
      contamination : "auto"
      random_state : 0</p>
<p>We can check the outliers for flow feed to reactor A:
<img alt="alt text" src="../image-9.png" /></p>
<h2 id="text-mining">Text Mining</h2>
<p>For heuristics miner, we get the following results if we use the oper data:</p>
<p><img alt="alt text" src="../image-12.png" /></p>
<p>Here the resulting network provides information on state transitions between machines. This can be used to find errors in process sequences.</p>
<p>We also applied association rules on machining data:
<img alt="alt text" src="../image-13.png" /></p>
<p>Where numbers represent operator IDs:
@ITEM=1=ID0998
@ITEM=2=ID4385
@ITEM=3=ID4355
@ITEM=4=ID4163
@ITEM=5=ID4872
@ITEM=6=ID4820
@ITEM=7=ID4445
@ITEM=8=ID4882
@ITEM=9=ID4528
@ITEM=10=ID4493
@ITEM=11=ID0937
@ITEM=12=ID4932
@ITEM=13=ID4429
@ITEM=14=ID4167
@ITEM=15=ID4529
@ITEM=16=ID4641
@ITEM=17=ID0420
@ITEM=18=ID4491
@ITEM=19=ID4132
@ITEM=20=ID4287
@ITEM=21=ID4718
@ITEM=22=ID4442
@ITEM=23=ID3846
@ITEM=24=ID4291
@ITEM=25=ID4794
@ITEM=26=ID0997</p>
<p>NOTE: IT IS NOT GOOD PRACTICE TO USE PREDICT WITH THESE MODELS</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../experiments/" class="btn btn-neutral float-left" title="Experiments"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../roadmap/" class="btn btn-neutral float-right" title="Roadmap">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../experiments/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../roadmap/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
