<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Plugin System - ObservML</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Plugin System";
        var mkdocs_page_input_path = "plugin_system.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ObservML
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../localdev/">Local Development</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../serve/">Docker Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../client/">Client Usage and Testing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Components</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../api/">API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rest_api/">REST API Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Plugin System</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#system-architecture">System Architecture</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-types">Plugin Types</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-mlops-plugin">1. MLOps Plugin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-datastream-plugin">2. DataStream Plugin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-taskqueue-plugin-removed">3. TaskQueue Plugin (REMOVED)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-interfaces">Plugin Interfaces</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mlops-plugin-interface">MLOps Plugin Interface</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#datastream-plugin-interface">DataStream Plugin Interface</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#taskqueue-plugin-interface-removed">TaskQueue Plugin Interface (REMOVED)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-implementations">Plugin Implementations</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mlflowplugin">MLflowPlugin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rabbitmqplugin">RabbitMQPlugin</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#celeryplugin-removed">CeleryPlugin (REMOVED)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-registration-and-retrieval">Plugin Registration and Retrieval</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-health-checks">Plugin Health Checks</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-configuration">Plugin Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#creating-custom-plugins">Creating Custom Plugins</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugin-lifecycle">Plugin Lifecycle</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#resource-management">Resource Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#health-checks">Health Checks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#plugin-initialization-errors">Plugin Initialization Errors</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#plugin-health-check-failures">Plugin Health Check Failures</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#missing-plugins">Missing Plugins</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins/">Plugins</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Framework</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../models/">Models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../experiments/">Experiments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../test_results/">Test Results</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../roadmap/">Roadmap</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ObservML</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Core Components</li>
      <li class="breadcrumb-item active">Plugin System</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="experimenthub-plugin-system">ExperimentHub Plugin System</h1>
<p>The ExperimentHub plugin system provides a flexible and extensible architecture for integrating various services and functionalities into the ExperimentHub. This document provides a comprehensive overview of the plugin system, including its architecture, configuration, and usage.</p>
<h2 id="system-architecture">System Architecture</h2>
<pre><code class="language-mermaid">graph TD
    A[ExperimentHub] --&gt; B[Plugin System]
    B --&gt; C[MLOps Plugin]
    B --&gt; D[DataStream Plugin]
    A --&gt; F[Experiment Management]
    F --&gt; G[Training]
    F --&gt; H[Prediction]
    F --&gt; I[Retraining]
    A --&gt; J[Configuration System]
    J --&gt; K[Plugin Configuration]
    J --&gt; L[Experiment Configuration]
    C --&gt; M[MLflowPlugin]
    D --&gt; N[RabbitMQPlugin]
</code></pre>
<p>The ExperimentHub plugin system consists of three main components:</p>
<ol>
<li><strong>Plugin Interfaces</strong>: Define the contract that plugin implementations must adhere to</li>
<li><strong>Plugin Implementations</strong>: Concrete implementations of the plugin interfaces</li>
<li><strong>Plugin Registry</strong>: Manages plugin registration and retrieval</li>
</ol>
<h2 id="plugin-types">Plugin Types</h2>
<p>The ExperimentHub supports two main types of plugins:</p>
<h3 id="1-mlops-plugin">1. MLOps Plugin</h3>
<p>The MLOps plugin handles model tracking, versioning, and artifact storage. It provides methods for:</p>
<ul>
<li>Creating experiments</li>
<li>Starting runs</li>
<li>Logging artifacts</li>
<li>Retrieving runs and experiments</li>
</ul>
<p>Default implementation: <code>MLflowPlugin</code></p>
<h3 id="2-datastream-plugin">2. DataStream Plugin</h3>
<p>The DataStream plugin handles data streaming and messaging. It provides methods for:</p>
<ul>
<li>Creating queues</li>
<li>Sending and receiving data</li>
<li>Flushing queues</li>
</ul>
<p>Default implementation: <code>RabbitMQPlugin</code></p>
<h3 id="3-taskqueue-plugin-removed">3. TaskQueue Plugin (REMOVED)</h3>
<p><strong>Note</strong>: The TaskQueue plugin functionality has been removed from ObservML. Training and prediction operations are now handled synchronously within the ExperimentHub. This simplifies the architecture and reduces dependencies while maintaining performance for most use cases.</p>
<h2 id="plugin-interfaces">Plugin Interfaces</h2>
<p>All plugins must implement the <code>Plugin</code> Protocol defined in <code>framework/plugins/base.py</code>:</p>
<pre><code class="language-python">class Plugin(Protocol):
    &quot;&quot;&quot;Base interface for all plugins&quot;&quot;&quot;
    plugin_type: str

    def __init__(self, **kwargs) -&gt; None:
        &quot;&quot;&quot;Initialize the plugin with configuration&quot;&quot;&quot;
        ...

    def initialize(self) -&gt; None:
        &quot;&quot;&quot;Initialize the plugin&quot;&quot;&quot;
        ...

    def shutdown(self) -&gt; None:
        &quot;&quot;&quot;Clean up resources when shutting down&quot;&quot;&quot;
        ...

    def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
        &quot;&quot;&quot;Check if the plugin is working correctly

        Returns:
            Tuple containing:
            - Boolean indicating if the plugin is healthy
            - Dictionary with additional health information and metrics
        &quot;&quot;&quot;
        ...
</code></pre>
<p>Each plugin type then extends this base interface with additional methods specific to its functionality.</p>
<h3 id="mlops-plugin-interface">MLOps Plugin Interface</h3>
<pre><code class="language-python">class MLOpsPlugin(Plugin, Protocol):
    &quot;&quot;&quot;Interface for MLOps plugins&quot;&quot;&quot;
    plugin_type = &quot;mlops&quot;

    def set_tracking_uri(self, uri: str) -&gt; None:
        &quot;&quot;&quot;Set tracking URI&quot;&quot;&quot;
        ...

    def create_experiment(self, name: str) -&gt; str:
        &quot;&quot;&quot;Create a new experiment&quot;&quot;&quot;
        ...

    def start_run(self, experiment_id: str) -&gt; str:
        &quot;&quot;&quot;Start a new run&quot;&quot;&quot;
        ...

    def log_artifact(self, path: str, artifact_path: str) -&gt; None:
        &quot;&quot;&quot;Log an artifact&quot;&quot;&quot;
        ...

    def get_run(self, run_id: str) -&gt; Any:
        &quot;&quot;&quot;Get a run by ID&quot;&quot;&quot;
        ...

    def get_experiment_by_name(self, name: str) -&gt; Any:
        &quot;&quot;&quot;Get an experiment by name&quot;&quot;&quot;
        ...
</code></pre>
<h3 id="datastream-plugin-interface">DataStream Plugin Interface</h3>
<pre><code class="language-python">class DataStreamPlugin(Plugin, Protocol):
    &quot;&quot;&quot;Interface for data stream plugins&quot;&quot;&quot;
    plugin_type = &quot;datastream&quot;

    def connect(self, **kwargs) -&gt; None:
        &quot;&quot;&quot;Connect to the data stream service&quot;&quot;&quot;
        ...

    def disconnect(self) -&gt; None:
        &quot;&quot;&quot;Disconnect from the data stream service&quot;&quot;&quot;
        ...

    def create_queue(self, queue_name: str) -&gt; None:
        &quot;&quot;&quot;Create a queue&quot;&quot;&quot;
        ...

    def pull_data(self, queue: str) -&gt; Any:
        &quot;&quot;&quot;Pull data from a queue&quot;&quot;&quot;
        ...

    def flush_queue(self, queue: str) -&gt; None:
        &quot;&quot;&quot;Flush a queue&quot;&quot;&quot;
        ...
</code></pre>
<h3 id="taskqueue-plugin-interface-removed">TaskQueue Plugin Interface (REMOVED)</h3>
<p><strong>Note</strong>: The TaskQueue plugin interface has been removed from ObservML. This interface is no longer supported as task queue functionality has been replaced with synchronous processing.</p>
<h2 id="plugin-implementations">Plugin Implementations</h2>
<h3 id="mlflowplugin">MLflowPlugin</h3>
<p>The <code>MLflowPlugin</code> is an implementation of the <code>MLOpsPlugin</code> interface that uses MLflow for model tracking and versioning.</p>
<pre><code class="language-python">class MLflowPlugin(MLOpsPlugin):
    &quot;&quot;&quot;MLflow implementation of MLOpsPlugin&quot;&quot;&quot;
    plugin_type = &quot;mlops&quot;

    def __init__(self, mlflow_uri: str, **kwargs):
        self.mlflow_uri = mlflow_uri
        self.client = None

    def initialize(self) -&gt; None:
        &quot;&quot;&quot;Initialize the plugin&quot;&quot;&quot;
        self.set_tracking_uri(self.mlflow_uri)
        self.client = MlflowClient(self.mlflow_uri)

    def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
        &quot;&quot;&quot;Check if MLflow plugin is working correctly&quot;&quot;&quot;
        try:
            # Try to connect to MLflow server
            self.client.list_experiments()
            return True, {&quot;status&quot;: &quot;connected&quot;, &quot;uri&quot;: self.mlflow_uri}
        except Exception as e:
            return False, {&quot;status&quot;: &quot;error&quot;, &quot;message&quot;: str(e), &quot;uri&quot;: self.mlflow_uri}

    # ... other methods ...
</code></pre>
<h3 id="rabbitmqplugin">RabbitMQPlugin</h3>
<p>The <code>RabbitMQPlugin</code> is an implementation of the <code>DataStreamPlugin</code> interface that uses RabbitMQ for data streaming and messaging.</p>
<pre><code class="language-python">class RabbitMQPlugin(DataStreamPlugin):
    &quot;&quot;&quot;RabbitMQ implementation of DataStreamPlugin&quot;&quot;&quot;
    plugin_type = &quot;datastream&quot;

    def __init__(self, host: str, port: str|int, username: str, password: str, **kwargs):
        self.host = host
        self.port = port
        self.username = username
        self.password = password
        self.connection = None
        self.channel = None

    def initialize(self) -&gt; None:
        &quot;&quot;&quot;Initialize the plugin&quot;&quot;&quot;
        self.connect()

    def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
        &quot;&quot;&quot;Check if RabbitMQ plugin is working correctly&quot;&quot;&quot;
        try:
            # Check if connection is open
            if self.connection is None or self.connection.is_closed:
                self.connect()

            # Try to create a test queue
            test_queue = f&quot;health_check_{int(time.time())}&quot;
            self.channel.queue_declare(queue=test_queue, durable=False)
            self.channel.queue_delete(queue=test_queue)

            return True, {
                &quot;status&quot;: &quot;connected&quot;, 
                &quot;host&quot;: self.host, 
                &quot;port&quot;: self.port
            }
        except Exception as e:
            return False, {
                &quot;status&quot;: &quot;error&quot;, 
                &quot;message&quot;: str(e), 
                &quot;host&quot;: self.host, 
                &quot;port&quot;: self.port
            }

    # ... other methods ...
</code></pre>
<h3 id="celeryplugin-removed">CeleryPlugin (REMOVED)</h3>
<p><strong>Note</strong>: The <code>CeleryPlugin</code> implementation has been removed from ObservML as task queue functionality is no longer supported. The system now processes training and prediction operations synchronously for improved simplicity and reliability.</p>
<h2 id="plugin-registration-and-retrieval">Plugin Registration and Retrieval</h2>
<p>Plugins are registered with the ExperimentHub using the <code>register_plugin</code> method:</p>
<pre><code class="language-python">def register_plugin(self, plugin: Plugin) -&gt; None:
    &quot;&quot;&quot;Register a plugin.

    Args:
        plugin: The plugin to register.
    &quot;&quot;&quot;
    self.plugins[plugin.plugin_type] = plugin
    plugin.initialize()
</code></pre>
<p>Plugins can be retrieved using the <code>get_plugin</code> method:</p>
<pre><code class="language-python">def get_plugin(self, plugin_type: str) -&gt; Optional[Plugin]:
    &quot;&quot;&quot;Get a plugin by type.

    Args:
        plugin_type: The type of plugin to get.

    Returns:
        The plugin, or None if not found.
    &quot;&quot;&quot;
    return self.plugins.get(plugin_type)
</code></pre>
<h2 id="plugin-health-checks">Plugin Health Checks</h2>
<p>All plugins must implement a <code>health_check</code> method that verifies if the plugin is working correctly. This method returns a tuple containing:</p>
<ol>
<li>A boolean indicating if the plugin is healthy</li>
<li>A dictionary with additional health information and metrics</li>
</ol>
<p>The ExperimentHub provides a <code>check_plugin_health</code> method that checks the health of all registered plugins:</p>
<pre><code class="language-python">def check_plugin_health(self) -&gt; Dict[str, Dict[str, Any]]:
    &quot;&quot;&quot;Check the health of all registered plugins

    Returns:
        Dictionary with plugin health information
    &quot;&quot;&quot;
    health_info = {}

    for plugin_type, plugin in self.plugins.items():
        is_healthy, details = plugin.health_check()
        health_info[plugin_type] = {
            &quot;healthy&quot;: is_healthy,
            &quot;details&quot;: details
        }

    return health_info
</code></pre>
<h2 id="plugin-configuration">Plugin Configuration</h2>
<p>Plugins are configured using the <code>hub_config.yaml</code> file:</p>
<pre><code class="language-yaml"># Plugin configurations
plugins:
  # MLOps plugin configuration
  mlops:
    enabled: true
    type: &quot;mlflow&quot;  # Which implementation to use
    config:
      mlflow_uri: &quot;http://localhost:5000&quot;

  # Data stream plugin configuration
  datastream:
    enabled: true
    type: &quot;rabbitmq&quot;
    config:
      host: &quot;localhost&quot;
      port: 5672
      username: &quot;guest&quot;
      password: &quot;guest&quot;

  # Task queue plugin configuration - REMOVED
  # The task queue functionality has been removed from ObservML
  # Training and prediction operations are now handled synchronously
</code></pre>
<p>The ExperimentHub initializes plugins based on this configuration:</p>
<pre><code class="language-python">def _init_plugins_from_config(self, plugin_config: dict) -&gt; None:
    &quot;&quot;&quot;Initialize plugins from configuration

    Args:
        plugin_config: Plugin configuration dictionary
    &quot;&quot;&quot;
    # Initialize MLOps plugin
    if plugin_config.get(&quot;mlops&quot;, {}).get(&quot;enabled&quot;, False):
        mlops_config = plugin_config[&quot;mlops&quot;]
        if mlops_config[&quot;type&quot;] == &quot;mlflow&quot;:
            from framework.plugins.mlflow_plugin import MLflowPlugin
            mlops_plugin = MLflowPlugin(**mlops_config[&quot;config&quot;])
            self.register_plugin(mlops_plugin)

    # Initialize DataStream plugin
    if plugin_config.get(&quot;datastream&quot;, {}).get(&quot;enabled&quot;, False):
        datastream_config = plugin_config[&quot;datastream&quot;]
        if datastream_config[&quot;type&quot;] == &quot;rabbitmq&quot;:
            from framework.plugins.rabbitmq_plugin import RabbitMQPlugin
            datastream_plugin = RabbitMQPlugin(**datastream_config[&quot;config&quot;])
            self.register_plugin(datastream_plugin)

    # TaskQueue plugin removed - no longer supported
    pass
</code></pre>
<h2 id="creating-custom-plugins">Creating Custom Plugins</h2>
<p>You can create custom plugins by implementing the appropriate plugin interface. Here's an example of creating a custom MLOps plugin:</p>
<pre><code class="language-python">from framework.plugins.mlops import MLOpsPlugin
from typing import Any, Dict, Tuple

class CustomMLOpsPlugin(MLOpsPlugin):
    &quot;&quot;&quot;Custom implementation of MLOpsPlugin&quot;&quot;&quot;
    plugin_type = &quot;mlops&quot;

    def __init__(self, custom_param: str, **kwargs):
        self.custom_param = custom_param

    def initialize(self) -&gt; None:
        &quot;&quot;&quot;Initialize the plugin&quot;&quot;&quot;
        # Custom initialization logic
        pass

    def shutdown(self) -&gt; None:
        &quot;&quot;&quot;Clean up resources&quot;&quot;&quot;
        # Custom cleanup logic
        pass

    def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
        &quot;&quot;&quot;Check if plugin is working correctly&quot;&quot;&quot;
        try:
            # Custom health check logic
            return True, {&quot;status&quot;: &quot;connected&quot;, &quot;custom_param&quot;: self.custom_param}
        except Exception as e:
            return False, {&quot;status&quot;: &quot;error&quot;, &quot;message&quot;: str(e)}

    # Implement other MLOpsPlugin methods
    # ...
</code></pre>
<p>To use your custom plugin, you can register it with the ExperimentHub:</p>
<pre><code class="language-python">from framework.ExperimentHub import ExperimentHub

# Create ExperimentHub
hub = ExperimentHub()

# Create and register custom plugin
custom_plugin = CustomMLOpsPlugin(custom_param=&quot;value&quot;)
hub.register_plugin(custom_plugin)
</code></pre>
<h2 id="plugin-lifecycle">Plugin Lifecycle</h2>
<p>Plugins go through the following lifecycle:</p>
<ol>
<li><strong>Initialization</strong>: The plugin is created with configuration parameters</li>
<li><strong>Registration</strong>: The plugin is registered with the ExperimentHub</li>
<li><strong>Initialization</strong>: The <code>initialize</code> method is called to set up the plugin</li>
<li><strong>Usage</strong>: The plugin is used by the ExperimentHub</li>
<li><strong>Shutdown</strong>: The <code>shutdown</code> method is called to clean up resources</li>
</ol>
<h2 id="best-practices">Best Practices</h2>
<p>When working with plugins, follow these best practices:</p>
<h3 id="error-handling">Error Handling</h3>
<p>Plugins should handle errors gracefully and provide meaningful error messages:</p>
<pre><code class="language-python">def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
    &quot;&quot;&quot;Check if plugin is working correctly&quot;&quot;&quot;
    try:
        # Health check logic
        return True, {&quot;status&quot;: &quot;connected&quot;}
    except ConnectionError as e:
        return False, {&quot;status&quot;: &quot;error&quot;, &quot;message&quot;: f&quot;Connection error: {str(e)}&quot;}
    except TimeoutError as e:
        return False, {&quot;status&quot;: &quot;error&quot;, &quot;message&quot;: f&quot;Timeout error: {str(e)}&quot;}
    except Exception as e:
        return False, {&quot;status&quot;: &quot;error&quot;, &quot;message&quot;: f&quot;Unexpected error: {str(e)}&quot;}
</code></pre>
<h3 id="resource-management">Resource Management</h3>
<p>Plugins should clean up resources in the <code>shutdown</code> method:</p>
<pre><code class="language-python">def shutdown(self) -&gt; None:
    &quot;&quot;&quot;Clean up resources&quot;&quot;&quot;
    if self.connection is not None:
        try:
            self.connection.close()
        except Exception as e:
            logging.error(f&quot;Error closing connection: {e}&quot;)
        finally:
            self.connection = None
</code></pre>
<h3 id="configuration">Configuration</h3>
<p>Plugins should accept configuration parameters in the constructor:</p>
<pre><code class="language-python">def __init__(self, host: str, port: int, username: str, password: str, **kwargs):
    self.host = host
    self.port = port
    self.username = username
    self.password = password
    self.timeout = kwargs.get(&quot;timeout&quot;, 30)
    self.connection = None
</code></pre>
<h3 id="health-checks">Health Checks</h3>
<p>Plugins should implement thorough health checks:</p>
<pre><code class="language-python">def health_check(self) -&gt; Tuple[bool, Dict[str, Any]]:
    &quot;&quot;&quot;Check if plugin is working correctly&quot;&quot;&quot;
    try:
        # Check connection
        if self.connection is None or not self.connection.is_connected():
            self.connect()

        # Check functionality
        self.ping()

        # Return health information
        return True, {
            &quot;status&quot;: &quot;connected&quot;,
            &quot;host&quot;: self.host,
            &quot;port&quot;: self.port,
            &quot;connection_id&quot;: self.connection.id
        }
    except Exception as e:
        return False, {
            &quot;status&quot;: &quot;error&quot;,
            &quot;message&quot;: str(e),
            &quot;host&quot;: self.host,
            &quot;port&quot;: self.port
        }
</code></pre>
<h3 id="documentation">Documentation</h3>
<p>Document the purpose, configuration, and usage of your plugins:</p>
<pre><code class="language-python">class CustomPlugin(Plugin):
    &quot;&quot;&quot;Custom plugin for integrating with Example Service.

    This plugin provides integration with Example Service, allowing
    the ExperimentHub to use Example Service for specific functionality.

    Configuration:
        api_key: API key for authenticating with Example Service
        host: Hostname of the Example Service API
        port: Port of the Example Service API
        timeout: Timeout for API requests (default: 30 seconds)

    Usage:
        plugin = CustomPlugin(
            api_key=&quot;your-api-key&quot;,
            host=&quot;api.example.com&quot;,
            port=443,
            timeout=60
        )
        hub.register_plugin(plugin)
    &quot;&quot;&quot;
    # ...
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="plugin-initialization-errors">Plugin Initialization Errors</h3>
<p>If a plugin fails to initialize, check the plugin configuration and make sure all required parameters are provided.</p>
<h3 id="plugin-health-check-failures">Plugin Health Check Failures</h3>
<p>If a plugin health check fails, check the health information for details on what went wrong.</p>
<h3 id="missing-plugins">Missing Plugins</h3>
<p>If a plugin is missing, check the configuration file and make sure the plugin is enabled and configured correctly.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../configuration/" class="btn btn-neutral float-left" title="Configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../plugins/" class="btn btn-neutral float-right" title="Plugins">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../configuration/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../plugins/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
